const CACHE_NAME = 'timetable-v1.0.0'; 
// ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä½¿ã„ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§
const urlsToCache = [
  './', 
  './index.html',
  './manifest.json',
  // Luxonãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆæ™‚åˆ»è¨ˆç®—ã«å¿…è¦ï¼‰
  'https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js', 
  './icons/icon-192.png',
  './icons/icon-512.png',
  
  // ğŸ”½ğŸ”½ğŸ”½ ã‚ãªãŸã®èƒŒæ™¯ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã™ã¹ã¦è¿½åŠ ã—ã¦ãã ã•ã„ ğŸ”½ğŸ”½ğŸ”½
  './images/ãƒ¡ãƒ¢ãƒ­ãƒ“.png', 
  './images/ãƒ¡ãƒ¢2.png', 
  './images/ã‚¢ã‚°ãƒ©ã‚¤ã‚¢.jpg', 
  './images/ã‚¢ãƒŠã‚¯ã‚µã‚´ãƒ©ã‚¹.jpg', 
  './images/ã‚¢ãƒ™ãƒ³ãƒãƒ¥ãƒªãƒ³.jpg', 
  './images/ã‚­ãƒ£ã‚¹ãƒˆãƒªã‚¹.jpg', 
  './images/ã‚­ãƒ¥ãƒ¬ãƒ.jpg', 
  './images/ã‚»ãƒ•ã‚¡ãƒªã‚¢.jpg', 
  './images/ãƒˆãƒªãƒ“ãƒ¼.jpg', 
  './images/ãƒ’ã‚¢ãƒ³ã‚·ãƒ³ã‚·ã‚¢.jpg', 
  './images/ãƒ•ã‚¡ã‚¤ãƒãƒ³.jpg', 
  './images/ãƒãƒ€ãƒ ãƒ˜ãƒ«ã‚¿.jpg', 
  './images/ãƒ¢ãƒ¼ãƒ‡ã‚£ã‚¹.jpg', 
  // ğŸ”¼ğŸ”¼ğŸ”¼ è©²å½“ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã™ã¹ã¦è¿½åŠ ã—ã¦ãã ã•ã„ ğŸ”¼ğŸ”¼ğŸ”¼
];


self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME).then((cache) => {
      return cache.addAll(urlsToCache);
    })
  );
});

self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request).then((response) => {
      if (response) {
        return response; // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ã‚Œã°è¿”ã™
      }
      return fetch(event.request); // ãªã‘ã‚Œã°ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰å–å¾—
    })
  );
});

self.addEventListener('activate', (event) => {
  const cacheWhitelist = [CACHE_NAME];
  event.waitUntil(
    caches.keys().then((cacheNames) => {
      return Promise.all(
        cacheNames.map((cacheName) => {
          if (cacheWhitelist.indexOf(cacheName) === -1) {
            return caches.delete(cacheName); // å¤ã„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤
          }
        })
      );
    })
  );
});